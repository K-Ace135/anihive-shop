Table site_user {
  id int [pk, increment]
  email varchar
  password varchar
  full_name varchar
  created_at datetime
}

Table user_address {
  id int [pk, increment]
  user_id int [ref: > site_user.id]
  address_id int [ref: > address.id]
  is_default boolean
}

Table address {
  id int [pk, increment]
  street varchar
  city varchar
  postcode varchar
  country_id int [ref: > country.id]
}

Table country {
  id int [pk, increment]
  name varchar
}

Table user_payment_method {
  id int [pk, increment]
  user_id int [ref: > site_user.id]
  payment_type_id int [ref: > payment_type.id]
  provider varchar
  account_number varchar
  expiry_date date
}

Table payment_type {
  id int [pk, increment]
  name varchar
}

Table product_type {
  id int [pk, increment]
  name varchar
}

Table product {
  id int [pk, increment]
  name varchar
  description text
  category_id int [ref: > product_type.id]
}

Table variation {
  id int [pk, increment]
  name varchar
}

Table variation_option {
  id int [pk, increment]
  variation_id int [ref: > variation.id]
  value varchar
}

Table product_configuration {
  id int [pk, increment]
  product_id int [ref: > product.id]
  variation_option_id int [ref: > variation_option.id]
}

Table product_item {
  id int [pk, increment]
  product_id int [ref: > product.id]
  sku varchar
  price decimal
  quantity int
  active boolean
}

Table fandom {
  id int [pk, increment]
  name varchar
}

Table product_fandom {
  product_id int [ref: > product.id]
  fandom_id int [ref: > fandom.id]
}

Table promotion {
  id int [pk, increment]
  name varchar
  description text
  discount decimal
  start_date date
  end_date date
}

Table promotion_category {
  id int [pk, increment]
  promotion_id int [ref: > promotion.id]
  category_id int [ref: > product_type.id]
}

Table shopping_cart_item {
  id int [pk, increment]
  user_id int [ref: > site_user.id]
  product_item_id int [ref: > product_item.id]
  quantity int
}

Table shop_order {
  id int [pk, increment]
  user_id int [ref: > site_user.id]
  address_id int [ref: > address.id]
  status_id int [ref: > order_status.id]
  shipping_method_id int [ref: > shipping_method.id]
  created_at datetime
  updated_at datetime
}

Table order_line {
  id int [pk, increment]
  order_id int [ref: > shop_order.id]
  product_item_id int [ref: > product_item.id]
  quantity int
  price decimal
}

Table order_status {
  id int [pk, increment]
  name varchar
}

Table shipping_method {
  id int [pk, increment]
  name varchar
  price decimal
}

Table user_review {
  id int [pk, increment]
  user_id int [ref: > site_user.id]
  product_id int [ref: > product.id]
  rating int
  comment text
  created_at datetime
}
